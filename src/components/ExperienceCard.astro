---
interface Props {
  company: string;
  role: string;
  period: string;
  location?: string;
  description: string;
  achievements: string[];
  technologies: string[];
  status?: 'current' | 'completed';
}

const { company, role, period, location, description, achievements, technologies, status = 'completed' } = Astro.props;
---

<div class="mb-8 font-mono text-sm">
  <!-- Main entry line -->
  <div class="flex items-start gap-3 mb-3 group cursor-default">
    <span class={`mt-1 flex-shrink-0 ${status === 'current' ? 'text-green-400' : 'text-blue-400'}`}>●</span>
    <div class="flex-1">
      <div class="flex items-baseline gap-3 flex-wrap">
        <span class="text-white font-semibold text-base">{role}</span>
        <span class="text-blue-400">@{company}</span>
        {location && <span class="text-gray-500">({location})</span>}
      </div>
    </div>
    <span class="text-gray-500 text-xs whitespace-nowrap">{period}</span>
  </div>

  <!-- Indented details -->
  <div class="ml-6 pl-6 border-l-2 border-gray-800 space-y-3">
    <!-- Description -->
    <div class="text-gray-300 leading-relaxed">
      <span class="text-gray-600">┖</span> {description}
    </div>

    <!-- Achievements -->
    {achievements && achievements.length > 0 && (
      <div class="space-y-2 mt-4">
        {achievements.map((achievement, index) => (
          <div class="flex items-start gap-3 text-gray-300 hover:text-gray-100 transition-colors">
            <span class="text-emerald-500 flex-shrink-0 font-bold">
              {index === achievements.length - 1 ? '┖' : '├'}
            </span>
            <span class="leading-relaxed">{achievement}</span>
          </div>
        ))}
      </div>
    )}

    <!-- Technologies -->
    <div class="flex flex-wrap gap-2 mt-5 pt-3 border-t border-gray-800">
      <span class="text-gray-500 mr-1">Stack:</span>
      {technologies.map((tech) => (
        <span class="px-2 py-1 bg-gray-900 text-cyan-400 rounded border border-gray-800 hover:border-cyan-500 transition-colors">
          {tech}
        </span>
      ))}
    </div>
  </div>
</div>
